<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/core-menu/core-menu.html">

<polymer-element name="project-list">
  <template>
    <style>
      #prj-button {
        background: #4285f4;
        color: #fff;
      }

      #prj-button:hover {
        background: #2a56c6;
      }

      #prj-button::shadow #ripple {
        color: #2a56c6;
      }
    </style>

    <core-ajax
      auto
      url="/projects.yaml"
      handleAs="text"
      id="req"></core-ajax>
      <div horizontal around-justified layout id="projects">
        <template repeat="{{project in projects}}">
        <a href="{{project.link}}">
          <paper-button raisedButton>{{project.name}}</paper-button>
        </a>
        </template>
      </div>
  </template>

  <script src="../js/js-yaml.min.js"></script>
  <script>
    Polymer("project-list", {
      ready: function () {
        var proj_req = this.$.req;
        var tpl = this;
        proj_req.addEventListener("core-response", function (e) {
          var data = proj_req.response;
          var projects = jsyaml.load(data);
          var prj = [];
          Object.keys(projects).forEach(function (key) {
            var obj = projects[key];
            obj["name"] = key;
            prj.push(obj);
          });
          tpl.projects = prj;
        });
      },
      menuSelect: function (e) {
        console.log(e);
      }
    });
  </script>
</polymer-element>